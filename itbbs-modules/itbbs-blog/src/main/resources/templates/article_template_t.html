<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【Vue2版】CSDN文章详情页复刻</title>
    <!-- 1. 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 2. 引入 Vue 2.x -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>

    <style>
        /* --- 全局样式 & Reset --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, "SF UI Text", Arial, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: #f5f6f7;
            color: #222226;
            font-size: 14px;
            line-height: 1.5;
        }
        a { text-decoration: none; color: inherit; cursor: pointer;}
        ul { list-style: none; }
        [v-cloak] { display: none; } /* 防止 Vue 加载前闪烁 */

        /* 布局容器 */
        .main-container {
            width: 1380px;
            max-width: 100%;
            margin: 56px auto 0;
            display: flex;
            padding: 0 24px 20px;
            gap: 10px;
        }

        /* 响应式 */
        @media (max-width: 1400px) {
            .main-container, .toolbar-container { width: 1200px !important; }
            .left-toolbox { margin-left: 10px !important; position: sticky !important; top: 80px; align-self: flex-start;}
        }
        @media (max-width: 1000px) {
            .right-sidebar { display: none !important; }
            .left-toolbox { display: none !important; }
            .main-container { width: 100%; padding: 0 10px; }
        }
    </style>
</head>
<body>

<div id="app" v-cloak>
    <!-- 顶部导航组件 -->
    <nav-bar :user-avatar="currentUser.avatar"></nav-bar>

    <div class="main-container">
        <!-- 左侧悬浮组件 -->
        <left-toolbox :stats="articleStats"></left-toolbox>

        <!-- 中间文章组件 -->
        <article-content :article="articleInfo"></article-content>

        <!-- 右侧侧边栏组件 -->
        <right-sidebar :author="authorInfo" :hot-list="hotArticles"></right-sidebar>
    </div>
</div>

<!-- ================= 组件模板定义 (x-template) ================= -->

<!-- 1. 顶部导航栏模板 -->
<script type="text/x-template" id="tpl-nav-bar">
    <nav class="csdn-toolbar">
        <div class="toolbar-container">
            <div class="left-part">
                <div class="logo">CSDN</div>
                <div class="nav-links">
                    <a v-for="item in navItems" :key="item">{{ item }}</a>
                </div>
            </div>
            <div class="search-box">
                <input type="text" v-model="searchText" placeholder="搜索博文/代码/用户..." @keyup.enter="handleSearch">
                <i class="fa fa-search search-btn" @click="handleSearch"></i>
            </div>
            <div class="user-actions">
                <a class="btn-write"><i class="fa fa-pen"></i> 创作中心</a>
                <div class="avatar">
                    <img :src="userAvatar" alt="Me">
                </div>
                <a class="bell-icon"><i class="fa fa-bell"></i></a>
            </div>
        </div>
    </nav>
</script>

<!-- 2. 左侧悬浮栏模板 -->
<script type="text/x-template" id="tpl-left-toolbox">
    <aside class="left-toolbox">
        <div class="tool-item" @click="handleLike">
            <i class="fa fa-thumbs-up" :class="{active: stats.isLiked}"></i>
            <span>{{ stats.likes }}</span>
        </div>
        <div class="tool-item">
            <i class="fa fa-comment-dots"></i>
            <span>{{ stats.comments }}</span>
        </div>
        <div class="tool-item">
            <i class="fa fa-star"></i>
            <span>{{ stats.collects }}</span>
        </div>
        <div class="tool-item">
            <i class="fa fa-share-alt"></i>
            <span>分享</span>
        </div>
    </aside>
</script>

<!-- 3. 文章内容模板 -->
<script type="text/x-template" id="tpl-article-content">
    <main class="article-area">
        <div class="article-title-box">
            <h1 class="title-article">{{ article.title }}</h1>
        </div>

        <div class="article-info-box">
            <div class="article-bar-top">
                <span class="article-type-img">原创</span>
                <div class="article-copyright">
                    <span class="author-name">{{ article.authorName }}</span>
                    <span style="margin: 0 10px;">|</span>
                    <span>{{ article.publishTime }}</span>
                </div>
            </div>
            <div class="read-count">
                <i class="fa fa-eye"></i> {{ article.views }} 阅读
                <span style="margin-left:10px;"><i class="fa fa-heart"></i> {{ article.favorites }} 收藏</span>
            </div>
        </div>

        <!-- 模拟文章正文 (v-html渲染) -->
        <div id="content_views" v-html="article.contentHtml"></div>

        <br><br>
        <hr style="border:0; border-top:1px solid #eee;">
        <p class="tags-row">
            文章分类：
            <span v-for="tag in article.tags" :key="tag" class="tag-item">{{ tag }}</span>
        </p>
    </main>
</script>

<!-- 4. 右侧侧边栏模板 -->
<script type="text/x-template" id="tpl-right-sidebar">
    <aside class="right-sidebar">
        <!-- 作者卡片 -->
        <div class="profile-card">
            <div class="profile-header">
                <img :src="author.avatar" alt="Author">
                <div class="profile-info">
                    <div class="name">{{ author.name }}</div>
                    <div class="level">码龄 {{ author.years }}年 | {{ author.location }}</div>
                </div>
            </div>
            <div class="data-info">
                <div class="data-item">
                    <span class="count">{{ author.originalCount }}</span><span class="label">原创</span>
                </div>
                <div class="data-item">
                    <span class="count">{{ author.fans }}</span><span class="label">粉丝</span>
                </div>
                <div class="data-item">
                    <span class="count">{{ author.likes }}</span><span class="label">获赞</span>
                </div>
                <div class="data-item">
                    <span class="count">{{ author.comments }}</span><span class="label">评论</span>
                </div>
            </div>
            <div class="opt-btn-box">
                <button class="btn-follow" @click="toggleFollow">
                    {{ isFollowing ? '已关注' : '关注' }}
                </button>
                <button class="btn-pm">私信</button>
            </div>
        </div>

        <!-- 热门文章列表 (v-for) -->
        <div class="recommend-box">
            <div class="sidebar-title">热门文章</div>
            <ul class="rec-list">
                <li v-for="(item, index) in hotList" :key="index">
                    <a href="#">{{ item.title }}</a>
                    <div class="rec-info">阅读 {{ item.views }}</div>
                </li>
            </ul>
        </div>

        <!-- 目录 (静态模拟) -->
        <div class="toc-box">
            <div class="sidebar-title">目录</div>
            <ul class="toc-list">
                <li>1. Vue2 基础介绍</li>
                <li class="sub">1.1 数据绑定</li>
                <li class="sub">1.2 组件化</li>
                <li>2. 案例分析</li>
            </ul>
        </div>
    </aside>
</script>

<!-- ================= Vue 逻辑代码 ================= -->
<script>
    // --- 组件 CSS 样式 (注入到 Head 中以保持单文件整洁) ---
    // 实际开发中这些应该写在 .vue 文件的 <style scoped> 中
    const styles = `
            /* Navbar Styles */
            .csdn-toolbar { height: 48px; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); position: fixed; top: 0; width: 100%; z-index: 1000; display: flex; justify-content: center; }
            .toolbar-container { width: 1380px; display: flex; align-items: center; justify-content: space-between; padding: 0 24px; }
            .left-part { display: flex; align-items: center; }
            .logo { font-size: 22px; font-weight: 900; color: #fc5531; margin-right: 20px; font-family: serif; }
            .nav-links a { padding: 0 10px; color: #555; font-weight: 500; cursor: pointer; }
            .nav-links a:hover { color: #222; }
            .search-box { flex: 1; max-width: 400px; margin: 0 20px; position: relative; }
            .search-box input { width: 100%; height: 32px; border: 1px solid #ccc; border-radius: 16px; padding: 0 15px; background: #f5f6f7; outline: none; transition: 0.3s; }
            .search-box input:focus { border-color: #fc5531; background: #fff; }
            .search-btn { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #888; cursor: pointer; }
            .user-actions { display: flex; align-items: center; gap: 20px; }
            .btn-write { background: #fc5531; color: #fff; padding: 5px 16px; border-radius: 16px; font-size: 14px; display: flex; align-items: center; gap: 5px; cursor: pointer;}
            .avatar { width: 32px; height: 32px; border-radius: 50%; overflow: hidden; background: #eee; }
            .avatar img { width: 100%; height: 100%; object-fit: cover; }
            .bell-icon { color: #999; }

            /* Left Toolbox */
            .left-toolbox { width: 48px; position: fixed; margin-left: -60px; top: 140px; display: flex; flex-direction: column; gap: 15px; z-index: 99; }
            .tool-item { width: 48px; height: 48px; background: #fff; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; color: #999; transition: 0.2s; }
            .tool-item:hover { color: #fc5531; }
            .tool-item i.active { color: #fc5531; }
            .tool-item span { font-size: 10px; }

            /* Article Area */
            .article-area { flex: 1; background: #fff; border-radius: 4px; padding: 30px; min-height: 800px; box-shadow: 0 1px 2px rgba(0,0,0,0.04); overflow: hidden; }
            .title-article { font-size: 28px; font-weight: 700; color: #222; margin-bottom: 15px; word-break: break-all; }
            .article-info-box { background: #f8f8f8; padding: 10px; border-radius: 4px; display: flex; justify-content: space-between; color: #999abc; margin-bottom: 20px; }
            .article-bar-top { display: flex; align-items: center; gap: 15px; }
            .article-type-img { height: 20px; background: #fc5531; color: #fff; padding: 0 6px; border-radius: 2px; font-size: 12px; line-height: 20px; margin-right: 5px; }
            .author-name { color: #555; font-weight: 500; }
            .tags-row { color: #999; font-size: 12px; margin-top: 20px; }
            .tag-item { background: #f0f0f5; padding: 2px 8px; border-radius: 4px; color: #555; margin-right: 5px; }

            /* Content Styles */
            #content_views { font-size: 16px; color: #222; line-height: 26px; }
            #content_views h2 { font-size: 22px; margin: 30px 0 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
            #content_views p { margin-bottom: 16px; text-align: justify; }
            #content_views pre { background-color: #282c34; color: #abb2bf; padding: 15px; border-radius: 4px; overflow-x: auto; font-family: monospace; margin-bottom: 20px; position: relative; }
            #content_views pre::before { content: "code"; position: absolute; top: 5px; right: 10px; color: #5c6370; font-size: 12px; }

            /* Right Sidebar */
            .right-sidebar { width: 300px; flex-shrink: 0; display: flex; flex-direction: column; gap: 10px; }
            .profile-card, .recommend-box, .toc-box { background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.04); border-radius: 4px; padding: 16px; }
            .profile-card { padding: 20px; }
            .profile-header { display: flex; align-items: center; margin-bottom: 15px; }
            .profile-header img { width: 48px; height: 48px; border-radius: 50%; margin-right: 10px; border: 1px solid #eee; }
            .profile-info .name { font-weight: bold; font-size: 14px; margin-bottom: 4px; }
            .profile-info .level { font-size: 12px; color: #999; }
            .data-info { display: flex; justify-content: space-between; margin-bottom: 15px; }
            .data-item { text-align: center; }
            .data-item .count { display: block; font-weight: bold; font-size: 16px; }
            .data-item .label { font-size: 12px; color: #999; }
            .opt-btn-box { display: flex; gap: 10px; }
            .btn-follow { flex: 1; height: 32px; border: 1px solid #fc5531; color: #fc5531; background: #fff; border-radius: 4px; cursor: pointer; }
            .btn-follow:hover { background: #fff5f2; }
            .btn-pm { flex: 1; height: 32px; border: 1px solid #ccccd8; color: #555; background: #fff; border-radius: 4px; cursor: pointer; }

            .sidebar-title { font-size: 16px; font-weight: 600; margin-bottom: 10px; border-left: 4px solid #fc5531; padding-left: 10px; line-height: 18px; }
            .rec-list li { margin-bottom: 12px; }
            .rec-list a { font-size: 14px; color: #555; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
            .rec-list a:hover { color: #fc5531; }
            .rec-info { font-size: 12px; color: #999; margin-top: 4px; }
            .toc-list { padding-left: 10px; font-size: 13px; color: #555; }
            .toc-list li { margin-bottom: 8px; }
            .toc-list li.sub { padding-left: 15px; }
        `;
    // 动态插入样式
    const styleEl = document.createElement('style');
    styleEl.innerHTML = styles;
    document.head.appendChild(styleEl);

    // ----------------- Vue 组件定义 -----------------

    // 1. NavBar 组件
    const NavBar = {
        template: '#tpl-nav-bar',
        props: ['userAvatar'],
        data() {
            return {
                searchText: '',
                navItems: ['博客', '下载', '学习', '社区', '云服务']
            }
        },
        methods: {
            handleSearch() {
                if(!this.searchText) return;
                alert('正在搜索：' + this.searchText);
            }
        }
    };

    // 2. LeftToolbox 组件
    const LeftToolbox = {
        template: '#tpl-left-toolbox',
        props: ['stats'],
        methods: {
            handleLike() {
                // 模拟点赞逻辑
                if (this.stats.isLiked) {
                    this.stats.likes--;
                    this.stats.isLiked = false;
                } else {
                    this.stats.likes++;
                    this.stats.isLiked = true;
                }
            }
        }
    };

    // 3. ArticleContent 组件
    const ArticleContent = {
        template: '#tpl-article-content',
        props: ['article']
    };

    // 4. RightSidebar 组件
    const RightSidebar = {
        template: '#tpl-right-sidebar',
        props: ['author', 'hotList'],
        data() {
            return {
                isFollowing: false
            }
        },
        methods: {
            toggleFollow() {
                this.isFollowing = !this.isFollowing;
            }
        }
    };

    // ----------------- Vue 根实例 -----------------
    new Vue({
        el: '#app',
        components: {
            'nav-bar': NavBar,
            'left-toolbox': LeftToolbox,
            'article-content': ArticleContent,
            'right-sidebar': RightSidebar
        },
        data() {
            return {
                // 当前登录用户数据
                currentUser: {
                    avatar: 'https://profile.csdnimg.cn/8/7/7/2_qq_35400000'
                },

                // 文章数据 (模拟后端返回)
                articleInfo: {
                    title: 'Vue2 核心原理与组件化实战【CSDN复刻版】',
                    authorName: '前端架构师_Jack',
                    publishTime: '2024-06-01 10:24:32',
                    views: '12,580',
                    favorites: 368,
                    tags: ['Vue.js', '前端开发', 'JavaScript'],
                    // 模拟 HTML 字符串内容
                    contentHtml: `
                            <p>在前端开发中，<strong>Vue.js</strong> 是目前最流行的框架之一。本文将带你深入理解 Vue2 的 Options API 风格。</p>
                            <h2>1. 数据驱动视图</h2>
                            <p>Vue 的核心思想是数据驱动。我们不再手动操作 DOM，而是修改数据。</p>
                            <pre>
data() {
    return {
        message: 'Hello CSDN'
    }
}</pre>
                            <h2>2. 组件化开发</h2>
                            <p>通过 props 和 events，我们可以构建出复杂的组件树。</p>
        <p>在前端开发中，<strong>Vue.js</strong> 是目前最流行的框架之一。本文将带你深入理解 Vue2 的 Options API 风格。</p>
                            <h2>1. 数据驱动视图</h2>
                            <p>Vue 的核心思想是数据驱动。我们不再手动操作 DOM，而是修改数据。</p>
                            <pre>
data() {
    return {
        message: 'Hello CSDN'
    }
}</pre>
                            <h2>2. 组件化开发</h2>
                            <p>通过 props 和 events，我们可以构建出复杂的组件树。</p>
        <p>在前端开发中，<strong>Vue.js</strong> 是目前最流行的框架之一。本文将带你深入理解 Vue2 的 Options API 风格。</p>
                            <h2>1. 数据驱动视图</h2>
                            <p>Vue 的核心思想是数据驱动。我们不再手动操作 DOM，而是修改数据。</p>
                            <pre>
data() {
    return {
        message: 'Hello CSDN'
    }
}</pre>
                            <h2>2. 组件化开发</h2>
                            <p>通过 props 和 events，我们可以构建出复杂的组件树。</p>
        <p>在前端开发中，<strong>Vue.js</strong> 是目前最流行的框架之一。本文将带你深入理解 Vue2 的 Options API 风格。</p>
                            <h2>1. 数据驱动视图</h2>
                            <p>Vue 的核心思想是数据驱动。我们不再手动操作 DOM，而是修改数据。</p>
                            <pre>
data() {
    return {
        message: 'Hello CSDN'
    }
}</pre>
                            <h2>2. 组件化开发</h2>
                            <p>通过 props 和 events，我们可以构建出复杂的组件树。</p>
        <p>在前端开发中，<strong>Vue.js</strong> 是目前最流行的框架之一。本文将带你深入理解 Vue2 的 Options API 风格。</p>
                            <h2>1. 数据驱动视图</h2>
                            <p>Vue 的核心思想是数据驱动。我们不再手动操作 DOM，而是修改数据。</p>
                            <pre>
data() {
    return {
        message: 'Hello CSDN'
    }
}</pre>
                            <h2>2. 组件化开发</h2>
                            <p>通过 props 和 events，我们可以构建出复杂的组件树。</p>
        <p>在前端开发中，<strong>Vue.js</strong> 是目前最流行的框架之一。本文将带你深入理解 Vue2 的 Options API 风格。</p>
                            <h2>1. 数据驱动视图</h2>
                            <p>Vue 的核心思想是数据驱动。我们不再手动操作 DOM，而是修改数据。</p>
                            <pre>
data() {
    return {
        message: 'Hello CSDN'
    }
}</pre>
                            <h2>2. 组件化开发</h2>
                            <p>通过 props 和 events，我们可以构建出复杂的组件树。</p>
                        `
                },

                // 侧边栏点赞数据
                articleStats: {
                    likes: 128,
                    comments: 24,
                    collects: 66,
                    isLiked: false
                },

                // 作者信息
                authorInfo: {
                    name: '前端架构师_Jack',
                    avatar: 'https://profile.csdnimg.cn/8/7/7/2_qq_35400000',
                    years: 8,
                    location: '北京',
                    originalCount: 482,
                    fans: '10万+',
                    likes: 2560,
                    comments: 320
                },

                // 热门文章列表
                hotArticles: [
                    { title: '2024年前端面试题汇总（附答案解析）', views: '5.2w' },
                    { title: 'Vue3.0 响应式原理深度解析', views: '2.1w' },
                    { title: '这可能是最全的 Webpack 性能优化指南', views: '1.8w' },
                    { title: 'JavaScript 闭包与作用域链详解', views: '9000+' }
                ]
            }
        }
    });
</script>
</body>
</html>
